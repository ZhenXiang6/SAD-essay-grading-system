# RAGâ€‘Chatbot

> ä»¥ **FastAPI + LangChain + GoogleÂ Gemini** æ‰“é€ çš„æ–‡ä»¶æª¢ç´¢å•ç­”ï¼ˆRAGï¼‰ç³»çµ±ï¼Œä¸¦ç”¨ **Streamlit** æä¾› Chat UIã€‚å°ˆæ¡ˆé©åˆéƒ¨ç½²åœ¨æœ¬æ©Ÿæˆ–é›²ç«¯ï¼Œæ”¯æ´å¤§å‹ PDFï¼ˆè²¡å ±ã€æŠ€è¡“æ‰‹å†Šç­‰ï¼‰é›¢ç·šå‘é‡åŒ–ã€‚

---

## ğŸ“‚ ç›®éŒ„çµæ§‹

```text
rag-app/
â”œâ”€â”€ backend/                 # FastAPI ä¼ºæœå™¨èˆ‡ RAG æ ¸å¿ƒ
â”‚   â”œâ”€â”€ RAG.py              # ä¸»ç¨‹å¼ï¼ˆREST APIï¼‰
â”‚   â”œâ”€â”€ build_index.py      # âœ¨ ç¬¬ä¸€æ¬¡é›¢ç·šå»ºç´¢å¼•ç”¨
â”‚   â”œâ”€â”€ faiss_index/        # å‘é‡åº«å¿«å–ï¼ˆé¦–æ¬¡å»ºç«‹å¾Œè‡ªå‹•ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ requirements.txt    # å¾Œç«¯ä¾è³´
â”œâ”€â”€ frontend/                # Streamlit å‰ç«¯
â”‚   â”œâ”€â”€ app.py              # Chat UI
â”‚   â””â”€â”€ requirements.txt    # å‰ç«¯ä¾è³´
â””â”€â”€ doc/                     # æ”¾ç½®åŸå§‹ PDF æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
# å¾Œç«¯
cd backend
pip install -r requirements.txt

# å‰ç«¯ï¼ˆå¦é–‹çµ‚ç«¯æ©Ÿï¼‰
cd ../frontend
pip install -r requirements.txt
```

### 2. æ”¾ç½® PDF

å°‡è¦æª¢ç´¢çš„æ–‡ä»¶æ”¾å…¥ **`doc/`** è³‡æ–™å¤¾ã€‚(åœ¨æœ¬æ¬¡å¯¦ä½œä¸­ï¼Œæˆ‘å°‡2024å¹´ä¿®é‡‘èç”¢æ¥­å°ˆé¡Œçš„ä¸Šèª²ç°¡å ±æ”¾å…¥è³‡æ–™å¤¾ä¸­)

### 3. ç¬¬ä¸€æ¬¡ï¼šç”Ÿæˆ FAISS å‘é‡ç´¢å¼•

```bash
cd backend
python build_index.py        # è§£æ PDF â†’ åˆ‡ç‰‡ â†’ åµŒå…¥ â†’ faiss_index/
```

*åŸ·è¡Œæ™‚é–“å–æ±ºæ–¼æª”æ¡ˆå¤§å°èˆ‡ç¶²è·¯é€Ÿåº¦ï¼Œåªéœ€è·‘ä¸€æ¬¡ã€‚*

### 4. å•Ÿå‹•å¾Œç«¯ API

```bash
uvicorn RAG:app --reload --port 8000
```

* è‹¥è¦å…¬é–‹åˆ°é ç«¯ï¼š `--host 0.0.0.0` ä¸¦ç¢ºä¿é˜²ç«ç‰†æ”¾è¡Œ 8000 é€£æ¥åŸ ã€‚

### 5. å•Ÿå‹•å‰ç«¯ Chat UI

```bash
cd ../frontend
streamlit run app.py         # é è¨­ http://localhost:8501
```

é–‹å•Ÿç€è¦½å™¨(http://localhost:8501) â†’ æå•ï¼Œå³å¯é–‹å§‹èˆ‡æ–‡ä»¶å°è©±ã€‚

---

## âš™ï¸ ä¸»è¦æŠ€è¡“

| æ¨¡çµ„                                           | ç”¨é€”                                              |
| -------------------------------------------- | ----------------------------------------------- |
| **FastAPI**                                  | REST API ä¼ºæœå™¨                                    |
| **LangChain** `ConversationalRetrievalChain` | RAG é‚è¼¯ï¼ˆæª¢ç´¢ + ç”Ÿæˆï¼‰                                 |
| **FAISS**                                    | æœ¬åœ°å‘é‡è³‡æ–™åº«ï¼Œæ”¯æ´å„„ç´šå‘é‡æª¢ç´¢                                |
| **GoogleÂ GenerativeÂ AI**                     | æ–‡å­—åµŒå…¥ï¼ˆ`embedding-001`ï¼‰ï¼† ç”Ÿæˆæ¨¡å‹ï¼ˆ`geminiâ€‘1.5â€‘flash`ï¼‰ |
| **Streamlit**                                | ç°¡æ˜“ Web å‰ç«¯ï¼Œå«èŠå¤©å…ƒä»¶                                 |

---

## ğŸ› ï¸ build\_index.py äº®é»

* **lazyâ€¯loading**ï¼šè§£æ PDF æ™‚ä¸€æ¬¡åªè®€ä¸€é ï¼Œé™ä½è¨˜æ†¶é«”ä½”ç”¨ã€‚
* **save\_local / load\_local**ï¼šå‘é‡åº«è½åœ°ç‚º `faiss_index/`ï¼ŒFastAPI å•Ÿå‹•ç§’ç´šå®Œæˆã€‚
* **å¯åˆ‡æ› Loader**ï¼šé è¨­ `PyPDFLoader`ï¼›å¦‚éœ€æ›´å¿«è§£æå¯æ”¹ `PyMuPDFLoader`ã€‚

---


## ğŸ§¹ æ¸…ç† / é‡æ–°ç´¢å¼•

```bash
rm -rf backend/faiss_index
python backend/build_index.py
```
